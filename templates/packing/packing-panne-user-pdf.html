<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <title>Tableau des Pannes - {{ user_detail.username }}</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        font-size: 12px;
        padding-left: 100px;
        padding-right: 100px;
      }
      table {
        width: 100%;
        border-collapse: collapse;
        margin-top: 20px;
      }
      th,
      td {
        border: 1px solid #000;
        padding: 5px;
        text-align: center;
      }
      th {
        background-color: #dbe6f1;
      }
      .duration {
        background-color: #4caf50;
        color: white;
        font-weight: bold;
        border-radius: 4px;
        padding: 2px 5px;
      }
      
      @media print {
        .no-print {
          display: none !important;
        }
      }
      
      @page {
        size: A5 landscape;
        margin: 1.5cm;
      }
      body {
        font-family: Arial, sans-serif;
      }
      .dept-CEET {
        background-color: #9e9e9e;
        color: white;
        padding: 2px 5px;
        border-radius: 4px;
      }
      .dept-COMM {
        background-color: #9e9e9e;
        color: white;
        padding: 2px 5px;
        border-radius: 4px;
      }
      .dept-MEC {
        background-color: #e57373;
        color: white;
        padding: 2px 5px;
        border-radius: 4px;
      }
      tfoot {
        font-weight: bold;
      }
    </style>
  </head>
  <body>
    <h2>Tableau des Pannes â€“ {{ user_detail.username }}</h2>
    {% comment %} <a href="?pdf=true" class="btn btn-danger">ðŸ“„ TÃ©lÃ©charger le PDF</a> {% endcomment %}
    <table>
      <thead>
        <tr>
          <th>#</th>
          <th>POSTE</th>
          <th>DEBUT</th>
          <th>FIN</th>
          <th>DURÃ‰E</th>
          <th>DÃ‰PARTEMENT</th>
          <th>CAUSE</th>
        </tr>
      </thead>
      <tbody>
        {% for obj in object_pann %}
          <tr>
            <td>{{ forloop.counter }}</td>
            <td>{{ obj.packing }}</td>
            <td>{{ obj.start_panne }}</td>
            <td>{{ obj.end_panne }}</td>
            <td class="duration">{{ obj.duree_formatee }}</td>
            <td class="dept-{{ obj.departement }}">{{ obj.departement }}</td>
            <td>{{ obj.description }}</td>
          </tr>
        {% empty %}
          <tr>
            <td colspan="7">Aucune panne trouvÃ©e</td>
          </tr>
        {% endfor %}
      </tbody>
      <tfoot>
        <tr>
          <td colspan="4">Total Temps dâ€™ArrÃªt :</td>
          <td colspan="3">{{ total_temp_arret }}</td>
        </tr>
      </tfoot>
    </table>
  </body>
</html>
